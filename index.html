<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰©å“å€Ÿç”¨ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f7fa; min-height: 100vh; }
        .header { background: white; padding: 0 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: fixed; width: 100%; top: 0; z-index: 1000; }
        .header-content { display: flex; justify-content: space-between; align-items: center; height: 60px; max-width: 1200px; margin: 0 auto; }
        .header h1 { color: #409EFF; font-size: 20px; }
        .main-content { margin-top: 80px; padding: 20px; max-width: 1200px; margin-left: auto; margin-right: auto; }
        .card { background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 24px; margin-bottom: 20px; }
        .search-header { display: flex; margin-bottom: 20px; gap: 16px; align-items: center; flex-wrap: wrap; }
        .low-stock { color: #f56c6c; font-weight: bold; }
        .item-info { background: #f8f9fa; padding: 16px; border-radius: 6px; margin-bottom: 16px; border-left: 4px solid #409EFF; }
        .success-message { background: #f0f9ff; border: 1px solid #91d5ff; color: #096dd9; padding: 12px 16px; border-radius: 6px; margin: 16px 0; }
        .error-message { background: #fef0f0; border: 1px solid #fbc4c4; color: #d93030; padding: 12px 16px; border-radius: 6px; margin: 16px 0; }
        .button-group { display: flex; gap: 12px; margin-top: 20px; }
    </style>
</head>
<body>
    <div id="app">
        <header class="header">
            <div class="header-content">
                <h1>ğŸ“¦ ç‰©å“å€Ÿç”¨ç®¡ç†ç³»ç»Ÿ</h1>
                <div style="display: flex; gap: 8px;">
                    <el-button :type="currentPage === 'items' ? 'primary' : ''" @click="switchPage('items')" size="small">ç‰©å“åˆ—è¡¨</el-button>
                    <el-button :type="currentPage === 'return' ? 'primary' : ''" @click="switchPage('return')" size="small">ç‰©å“å½’è¿˜</el-button>
                    <el-button :type="currentPage === 'admin' ? 'primary' : ''" @click="switchPage('admin')" size="small">ç®¡ç†åå°</el-button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- è¿æ¥çŠ¶æ€æç¤º -->
            <div v-if="connectionError" class="error-message">
                âŒ æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š{{ connectionError }}
                <div style="margin-top: 8px; font-size: 14px;">
                    è¯·æ£€æŸ¥ï¼š1. Supabaseé…ç½® 2. ç½‘ç»œè¿æ¥ 3. æ•°æ®åº“è¡¨æ˜¯å¦åˆ›å»º
                </div>
            </div>

            <!-- ç‰©å“åˆ—è¡¨é¡µé¢ -->
            <div v-if="currentPage === 'items'">
                <div class="card">
                    <h2 style="margin-bottom: 20px;">ğŸ“‹ ç‰©å“åˆ—è¡¨</h2>
                    
                    <div class="search-header">
                        <el-input v-model="searchKeyword" placeholder="æœç´¢ç‰©å“åç§°æˆ–å›ºèµ„å·" style="width: 300px;">
                            <template #append>
                                <el-button @click="loadItems" :icon="Search">æœç´¢</el-button>
                            </template>
                        </el-input>
                        
                        <el-select v-model="filterLocation" placeholder="é€‰æ‹©åœ°ç‚¹" @change="loadItems" style="width: 200px;">
                            <el-option label="å…¨éƒ¨åœ°ç‚¹" value=""></el-option>
                            <el-option label="ä»“åº“A" value="ä»“åº“A"></el-option>
                            <el-option label="ä»“åº“B" value="ä»“åº“B"></el-option>
                            <el-option label="åŠå…¬å®¤" value="åŠå…¬å®¤"></el-option>
                        </el-select>

                        <el-button type="success" @click="addTestData" :loading="testDataLoading" style="margin-left: auto;">
                            + æ·»åŠ æµ‹è¯•æ•°æ®
                        </el-button>
                    </div>

                    <el-table :data="items" v-loading="loading" style="width: 100%">
                        <el-table-column prop="asset_number" label="å›ºèµ„å·" width="120"></el-table-column>
                        <el-table-column prop="item_name" label="ç‰©å“åç§°"></el-table-column>
                        <el-table-column prop="location" label="å­˜æ”¾åœ°ç‚¹" width="100"></el-table-column>
                        <el-table-column prop="total_quantity" label="æ€»æ•°é‡" width="80"></el-table-column>
                        <el-table-column prop="available_quantity" label="å¯ç”¨æ•°é‡" width="80">
                            <template #default="scope">
                                <span :class="{ 'low-stock': scope.row.available_quantity === 0 }">
                                    {{ scope.row.available_quantity }}
                                </span>
                            </template>
                        </el-table-column>
                        <el-table-column prop="status" label="çŠ¶æ€" width="100">
                            <template #default="scope">
                                <el-tag :type="getStatusType(scope.row.status)" size="small">
                                    {{ getStatusText(scope.row.status) }}
                                </el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column label="æ“ä½œ" width="120">
                            <template #default="scope">
                                <el-button type="primary" size="small" 
                                          :disabled="scope.row.available_quantity === 0"
                                          @click="handleBorrow(scope.row)">
                                    å€Ÿç”¨
                                </el-button>
                            </template>
                        </el-table-column>
                    </el-table>

                    <div v-if="items.length === 0 && !loading" style="text-align: center; padding: 40px; color: #909399;">
                        ğŸ“ æš‚æ— ç‰©å“æ•°æ®ï¼Œè¯·å…ˆæ·»åŠ æµ‹è¯•æ•°æ®æˆ–å¯¼å…¥æ•°æ®
                    </div>
                </div>

                <!-- å€Ÿç”¨å¯¹è¯æ¡† -->
                <el-dialog v-model="borrowDialogVisible" title="ç‰©å“å€Ÿç”¨" width="500px">
                    <el-form :model="borrowForm" label-width="100px">
                        <el-form-item label="ç‰©å“ä¿¡æ¯" v-if="selectedItem">
                            <div class="item-info">
                                <p><strong>å›ºèµ„å·ï¼š</strong>{{ selectedItem.asset_number }}</p>
                                <p><strong>ç‰©å“åç§°ï¼š</strong>{{ selectedItem.item_name }}</p>
                                <p><strong>å¯ç”¨æ•°é‡ï¼š</strong>{{ selectedItem.available_quantity }}</p>
                                <p><strong>å­˜æ”¾åœ°ç‚¹ï¼š</strong>{{ selectedItem.location }}</p>
                            </div>
                        </el-form-item>
                        <el-form-item label="å€Ÿç”¨äººå§“å" required>
                            <el-input v-model="borrowForm.borrowerName" placeholder="è¯·è¾“å…¥å€Ÿç”¨äººå§“å" style="width: 300px;"></el-input>
                        </el-form-item>
                        <el-form-item label="å€Ÿç”¨æ•°é‡" required>
                            <el-input-number v-model="borrowForm.borrowQuantity" :min="1" :max="selectedItem ? selectedItem.available_quantity : 1"></el-input-number>
                            <span style="margin-left: 12px; color: #909399;">æœ€å¤§å¯å€Ÿï¼š{{ selectedItem ? selectedItem.available_quantity : 0 }}</span>
                        </el-form-item>
                    </el-form>
                    <template #footer>
                        <el-button @click="borrowDialogVisible = false">å–æ¶ˆ</el-button>
                        <el-button type="primary" @click="submitBorrow" :loading="borrowLoading">ç¡®è®¤å€Ÿç”¨</el-button>
                    </template>
                </el-dialog>
            </div>

            <!-- å½’è¿˜é¡µé¢ -->
            <div v-if="currentPage === 'return'">
                <div class="card">
                    <h2 style="margin-bottom: 20px;">ğŸ”™ ç‰©å“å½’è¿˜</h2>
                    
                    <el-form :model="returnForm" label-width="100px">
                        <el-form-item label="å›ºèµ„å·" required>
                            <el-input v-model="returnForm.assetNumber" placeholder="è¯·è¾“å…¥å›ºèµ„å·" style="width: 300px;"></el-input>
                        </el-form-item>
                        <el-form-item label="æ ¡éªŒç " required>
                            <el-input v-model="returnForm.verificationCode" placeholder="è¯·è¾“å…¥æ ¡éªŒç " style="width: 300px;"></el-input>
                        </el-form-item>
                        <el-form-item>
                            <el-button type="primary" @click="searchBorrowRecord" :loading="searchLoading">æŸ¥è¯¢å€Ÿç”¨è®°å½•</el-button>
                        </el-form-item>
                    </el-form>

                    <div v-if="borrowRecord" style="margin-top: 20px;">
                        <el-divider>å€Ÿç”¨è®°å½•ä¿¡æ¯</el-divider>
                        <el-descriptions :column="2" border>
                            <el-descriptions-item label="ç‰©å“åç§°">{{ borrowRecord.item_name }}</el-descriptions-item>
                            <el-descriptions-item label="å›ºèµ„å·">{{ borrowRecord.asset_number }}</el-descriptions-item>
                            <el-descriptions-item label="å€Ÿç”¨äºº">{{ borrowRecord.borrower_name }}</el-descriptions-item>
                            <el-descriptions-item label="å€Ÿç”¨æ•°é‡">{{ borrowRecord.borrow_quantity }}</el-descriptions-item>
                            <el-descriptions-item label="å€Ÿç”¨æ—¶é—´">{{ formatDate(borrowRecord.borrow_time) }}</el-descriptions-item>
                        </el-descriptions>
                        <div style="text-align: center; margin-top: 20px;">
                            <el-button type="success" @click="confirmReturn" :loading="returnLoading" size="large">âœ… ç¡®è®¤å½’è¿˜</el-button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†åå° -->
            <div v-if="currentPage === 'admin'">
                <div class="card">
                    <h2 style="margin-bottom: 20px;">âš™ï¸ ç‰©å“æ‰¹é‡å¯¼å…¥</h2>
                    
                    <div class="success-message">
                        ğŸ’¡ <strong>å¯¼å…¥æ ¼å¼è¯´æ˜</strong><br>
                        æ¯è¡Œä¸€ä¸ªç‰©å“ï¼Œæ ¼å¼ï¼šå›ºèµ„å·,æ ¡éªŒç ,æœ‰æ•ˆæœŸ(å¯é€‰),ç‰©å“åç§°(å¯é€‰),å­˜æ”¾åœ°ç‚¹(å¯é€‰),æ•°é‡(å¯é€‰)<br>
                        ç¤ºä¾‹ï¼šGD2023001,123456,2024-12-31,ç¬”è®°æœ¬ç”µè„‘,ä»“åº“A,5
                    </div>
                    
                    <el-input v-model="importData" type="textarea" :rows="8" placeholder="è¯·è¾“å…¥å¯¼å…¥æ•°æ®..." style="margin: 16px 0;"></el-input>
                    
                    <div class="button-group">
                        <el-button type="primary" @click="processImport" :loading="importLoading" size="large">ğŸš€ æ‰§è¡Œå¯¼å…¥</el-button>
                        <el-button @click="importData = ''">æ¸…ç©º</el-button>
                        <el-button @click="showExampleData">æŸ¥çœ‹ç¤ºä¾‹</el-button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;
        
        // ==== é‡è¦é…ç½®ï¼šè¯·ä¿®æ”¹è¿™é‡Œ ====
        const SUPABASE_CONFIG = {
            url: 'https://odbqlwjxlvhxdsgzkcki.supabase.co',  // 
            key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kYnFsd2p4bHZoeGRzZ3prY2tpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExOTA0ODQsImV4cCI6MjA3Njc2NjQ4NH0.oORfTnkprbe1ZhyBpyKYI84yGFmXkLtWU5Bbmuz1BsE'                     // 
        };
        // ==== é…ç½®ç»“æŸ ====

        const app = createApp({
            setup() {
                const { ElMessage, ElLoading } = ElementPlus;
                const Search = {
                    template: '<el-icon><Search /></el-icon>'
                };

                const currentPage = ref('items');
                const items = ref([]);
                const loading = ref(false);
                const searchKeyword = ref('');
                const filterLocation = ref('');
                const connectionError = ref('');
                
                // å€Ÿç”¨ç›¸å…³
                const borrowDialogVisible = ref(false);
                const selectedItem = ref(null);
                const borrowForm = ref({ borrowerName: '', borrowQuantity: 1 });
                const borrowLoading = ref(false);
                
                // å½’è¿˜ç›¸å…³
                const returnForm = ref({ assetNumber: '', verificationCode: '' });
                const borrowRecord = ref(null);
                const searchLoading = ref(false);
                const returnLoading = ref(false);
                
                // å¯¼å…¥ç›¸å…³
                const importData = ref('');
                const importLoading = ref(false);
                const testDataLoading = ref(false);
                
                // åˆ›å»º Supabase å®¢æˆ·ç«¯
                const supabase = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.key);
                
                // æµ‹è¯•æ•°æ®åº“è¿æ¥
                const testConnection = async () => {
                    try {
                        const { data, error } = await supabase.from('items').select('count').limit(1);
                        if (error) throw error;
                        connectionError.value = '';
                        return true;
                    } catch (error) {
                        connectionError.value = error.message;
                        return false;
                    }
                };
                
                // åŠ è½½ç‰©å“åˆ—è¡¨
                const loadItems = async () => {
                    if (!await testConnection()) return;
                    
                    loading.value = true;
                    try {
                        let query = supabase.from('items').select('*');
                        
                        if (searchKeyword.value) {
                            query = query.or(`item_name.ilike.%${searchKeyword.value}%,asset_number.ilike.%${searchKeyword.value}%`);
                        }
                        
                        if (filterLocation.value) {
                            query = query.eq('location', filterLocation.value);
                        }
                        
                        const { data, error } = await query.order('created_at', { ascending: false });
                        
                        if (error) throw error;
                        items.value = data || [];
                    } catch (error) {
                        ElMessage.error('åŠ è½½å¤±è´¥: ' + error.message);
                    } finally {
                        loading.value = false;
                    }
                };
                
                // æ·»åŠ æµ‹è¯•æ•°æ®
                const addTestData = async () => {
                    if (!await testConnection()) return;
                    
                    testDataLoading.value = true;
                    try {
                        const testItems = [
                            {
                                asset_number: 'TEST001',
                                verification_code: '123456',
                                item_name: 'æµ‹è¯•ç¬”è®°æœ¬ç”µè„‘',
                                location: 'ä»“åº“A',
                                total_quantity: 5,
                                available_quantity: 5,
                                status: 'available'
                            },
                            {
                                asset_number: 'TEST002', 
                                verification_code: '654321',
                                item_name: 'æµ‹è¯•æŠ•å½±ä»ª',
                                location: 'åŠå…¬å®¤',
                                total_quantity: 3,
                                available_quantity: 3,
                                status: 'available'
                            },
                            {
                                asset_number: 'TEST003',
                                verification_code: '112233',
                                item_name: 'æµ‹è¯•åŠå…¬æ¤…',
                                location: 'ä»“åº“B',
                                total_quantity: 10,
                                available_quantity: 10,
                                status: 'available'
                            }
                        ];
                        
                        const { error } = await supabase.from('items').insert(testItems);
                        if (error) throw error;
                        
                        ElMessage.success('æµ‹è¯•æ•°æ®æ·»åŠ æˆåŠŸï¼');
                        loadItems();
                    } catch (error) {
                        ElMessage.error('æ·»åŠ å¤±è´¥: ' + error.message);
                    } finally {
                        testDataLoading.value = false;
                    }
                };
                
                // æ˜¾ç¤ºç¤ºä¾‹æ•°æ®
                const showExampleData = () => {
                    importData.value = `GD2023001,123456,2024-12-31,ç¬”è®°æœ¬ç”µè„‘,ä»“åº“A,5
GD2023002,654321,2024-06-30,æŠ•å½±ä»ª,åŠå…¬å®¤,3
GD2023003,112233,,åŠå…¬æ¤…,ä»“åº“B,10
GD2023004,445566,,æ‰“å°æœº,ä»“åº“A,2`;
                    ElMessage.success('å·²å¡«å……ç¤ºä¾‹æ•°æ®ï¼Œè¯·ä¿®æ”¹åå¯¼å…¥');
                };
                
                // é¡µé¢åˆ‡æ¢
                const switchPage = (page) => {
                    currentPage.value = page;
                    if (page === 'items') loadItems();
                };
                
                // æ‰“å¼€å€Ÿç”¨å¯¹è¯æ¡†
                const handleBorrow = (item) => {
                    selectedItem.value = item;
                    borrowForm.value = {
                        borrowerName: '',
                        borrowQuantity: 1
                    };
                    borrowDialogVisible.value = true;
                };
                
                // æäº¤å€Ÿç”¨
                const submitBorrow = async () => {
                    if (!borrowForm.value.borrowerName) {
                        ElMessage.warning('è¯·è¾“å…¥å€Ÿç”¨äººå§“å');
                        return;
                    }
                    
                    borrowLoading.value = true;
                    try {
                        // æ›´æ–°ç‰©å“æ•°é‡
                        const { error: updateError } = await supabase
                            .from('items')
                            .update({ 
                                available_quantity: selectedItem.value.available_quantity - borrowForm.value.borrowQuantity 
                            })
                            .eq('id', selectedItem.value.id);
                        
                        if (updateError) throw updateError;
                        
                        // åˆ›å»ºå€Ÿç”¨è®°å½•
                        const { error } = await supabase
                            .from('borrow_records')
                            .insert({
                                item_id: selectedItem.value.id,
                                asset_number: selectedItem.value.asset_number,
                                borrower_name: borrowForm.value.borrowerName,
                                borrow_quantity: borrowForm.value.borrowQuantity
                            });
                        
                        if (error) throw error;
                        
                        ElMessage.success('å€Ÿç”¨æˆåŠŸï¼');
                        borrowDialogVisible.value = false;
                        loadItems();
                    } catch (error) {
                        ElMessage.error('å€Ÿç”¨å¤±è´¥: ' + error.message);
                    } finally {
                        borrowLoading.value = false;
                    }
                };
                
                // æŸ¥è¯¢å€Ÿç”¨è®°å½•
                const searchBorrowRecord = async () => {
                    if (!returnForm.value.assetNumber || !returnForm.value.verificationCode) {
                        ElMessage.warning('è¯·è¾“å…¥å›ºèµ„å·å’Œæ ¡éªŒç ');
                        return;
                    }
                    
                    searchLoading.value = true;
                    try {
                        const { data, error } = await supabase
                            .from('borrow_records')
                            .select(`
                                *,
                                items:item_id (
                                    item_name,
                                    verification_code
                                )
                            `)
                            .eq('asset_number', returnForm.value.assetNumber)
                            .eq('status', 'borrowed');
                        
                        if (error) throw error;
                        
                        const record = data.find(r => r.items.verification_code === returnForm.value.verificationCode);
                        if (!record) {
                            throw new Error('æœªæ‰¾åˆ°æœ‰æ•ˆçš„å€Ÿç”¨è®°å½•');
                        }
                        
                        borrowRecord.value = {
                            ...record,
                            item_name: record.items.item_name
                        };
                        
                        ElMessage.success('æŸ¥è¯¢æˆåŠŸï¼');
                    } catch (error) {
                        borrowRecord.value = null;
                        ElMessage.error(error.message);
                    } finally {
                        searchLoading.value = false;
                    }
                };
                
                // ç¡®è®¤å½’è¿˜
                const confirmReturn = async () => {
                    returnLoading.value = true;
                    try {
                        // æ›´æ–°ç‰©å“æ•°é‡
                        const { error: updateError } = await supabase
                            .from('items')
                            .update({ 
                                available_quantity: supabase.sql`available_quantity + ${borrowRecord.value.borrow_quantity}`
                            })
                            .eq('id', borrowRecord.value.item_id);
                        
                        if (updateError) throw updateError;
                        
                        // æ›´æ–°å€Ÿç”¨è®°å½•
                        const { error } = await supabase
                            .from('borrow_records')
                            .update({ 
                                status: 'returned',
                                actual_return_time: new Date().toISOString()
                            })
                            .eq('id', borrowRecord.value.id);
                        
                        if (error) throw error;
                        
                        ElMessage.success('å½’è¿˜æˆåŠŸï¼');
                        borrowRecord.value = null;
                        returnForm.value = { assetNumber: '', verificationCode: '' };
                    } catch (error) {
                        ElMessage.error('å½’è¿˜å¤±è´¥: ' + error.message);
                    } finally {
                        returnLoading.value = false;
                    }
                };
                
                // æ‰¹é‡å¯¼å…¥
                const processImport = async () => {
                    if (!importData.value.trim()) {
                        ElMessage.warning('è¯·è¾“å…¥å¯¼å…¥æ•°æ®');
                        return;
                    }
                    
                    const lines = importData.value.split('\n').filter(line => line.trim());
                    const itemsToImport = [];
                    
                    for (let line of lines) {
                        const [assetNumber, verificationCode, expiryDate, itemName, location, quantity] = line.split(',');
                        
                        if (assetNumber && verificationCode) {
                            itemsToImport.push({
                                asset_number: assetNumber.trim(),
                                verification_code: verificationCode.trim(),
                                expiry_date: expiryDate ? expiryDate.trim() : null,
                                item_name: itemName ? itemName.trim() : 'æœªå‘½åç‰©å“',
                                location: location ? location.trim() : 'é»˜è®¤åœ°ç‚¹',
                                total_quantity: parseInt(quantity) || 1,
                                available_quantity: parseInt(quantity) || 1
                            });
                        }
                    }
                    
                    if (itemsToImport.length === 0) {
                        ElMessage.warning('æ²¡æœ‰æœ‰æ•ˆçš„ç‰©å“æ•°æ®');
                        return;
                    }
                    
                    importLoading.value = true;
                    try {
                        const { error } = await supabase.from('items').insert(itemsToImport);
                        if (error) throw error;
                        
                        ElMessage.success(`æˆåŠŸå¯¼å…¥ ${itemsToImport.length} ä¸ªç‰©å“`);
                        importData.value = '';
                        loadItems();
                    } catch (error) {
                        ElMessage.error('å¯¼å…¥å¤±è´¥: ' + error.message);
                    } finally {
                        importLoading.value = false;
                    }
                };
                
                // å·¥å…·å‡½æ•°
                const getStatusType = (status) => {
                    const types = { available: 'success', borrowed: 'warning', maintenance: 'danger' };
                    return types[status] || 'info';
                };
                
                const getStatusText = (status) => {
                    const texts = { available: 'å¯ç”¨', borrowed: 'å·²å€Ÿç”¨', maintenance: 'ç»´ä¿®ä¸­' };
                    return texts[status] || status;
                };
                
                const formatDate = (dateString) => {
                    return new Date(dateString).toLocaleString('zh-CN');
                };
                
                // åˆå§‹åŒ–
                onMounted(() => {
                    testConnection();
                    loadItems();
                });
                
                return {
                    currentPage,
                    items,
                    loading,
                    searchKeyword,
                    filterLocation,
                    connectionError,
                    borrowDialogVisible,
                    selectedItem,
                    borrowForm,
                    borrowLoading,
                    returnForm,
                    borrowRecord,
                    searchLoading,
                    returnLoading,
                    importData,
                    importLoading,
                    testDataLoading,
                    Search,
                    switchPage,
                    loadItems,
                    addTestData,
                    showExampleData,
                    handleBorrow,
                    submitBorrow,
                    searchBorrowRecord,
                    confirmReturn,
                    processImport,
                    getStatusType,
                    getStatusText,
                    formatDate
                };
            }
        });
        
        app.use(ElementPlus);
        app.mount('#app');
    </script>
</body>
</html>
